\chapter{Introduction}\label{chap:introduction}

\section{Model-Driven Development in Education at NTNU}
% * NTNU, TDT4250, EMF in education, Eclipse IDE for EMF, shift from Eclipse to web with Theia/VSCode

\paragraph{In a world that becomes more digital for each day, there is a large need for software development.} Software is often created by writing code using programming languages that compile down to computer instructions. Developers write the code based on a set of requirements, and change it when the  requirements change.

\paragraph{One alternative approach to software development, is \acrfull{MDD}.}
This approach has the developers create models of their \gls{domain}, and this model drives the rest of the software development. 
The code is usually generated from the model. 
If the software requirements change, the model is updated first, and the code is re-generated.
The model itself is often one or more artifacts in the software project, expressed in a modeling language.
Modeling simplifies the \gls{domain} by using abstraction, and reduces the world down to the entities, relations, procedures (or other abstractions) that are needed to solve the relevant problems.


\paragraph{The \acrshort{MDD} approach is taught at \acrfull{NTNU}.}
The course is named \textit{\gls{TDT4250} Advanced Software Design}.
A modeling language called \textit{\gls{Ecore}} is used in \gls{TDT4250}.
This language comes from the \acrfull{EMF}.
The models can generate java code, and can extend the \gls{Eclipse} as a plugin.
The plugin lets a user enter data for a model instance by using \gls{Eclipse} as a user interface.
Students also learn to create \acrfullpl{DSL} with an \gls{Ecore} model as its core.

\paragraph{\Gls{Eclipse} is required to work with \acrshort{EMF} modeling.}
It has editors for \gls{Ecore}, code generation and model validation.
There are two main types of editors: hierarchical tree editors and graphical diagram editors.
There are also multiple different implementation on the tree editors, based on different underlying frameworks.

\paragraph{The reliance on \gls{Eclipse} is a problem for students.}
Students don't like to work in Eclipse, because of various issues with usability, errors or stability~\cite{rekstadModelingEnvironmentCloud2020}.
If a student wants to use \acrshort{EMF} afterwards in their job, they would have to use \gls{Eclipse}, and also convince their team to do it as well.
Some students see \acrshort{EMF} as being too \gls{Eclipse} related, as well, and incorrectly see it as a tool for only developing Eclipse plugins.
This results in students resisting to learn \acrshort{EMF}, and also \acrshort{MDD} by implication, because no \acrshort{EMF} alternative is taught.

\paragraph{\acrshort{NTNU} wants to move from \gls{Eclipse} to \gls{VSCode} running in a web browser.}
This is a recent decision, and mainly for the course in Object Oriented Programming with java.
Some of the reasoning behind the change, is to avoid installation issues from \gls{Eclipse}, and to ease online collaboration through \gls{GitHub} and publication of assignments. %TODO: cite?
\gls{VSCode} is an advanced text editor that has increased in popularity in the recent years.
It is based on web technologies, but normally runs as a desktop application.
A website and service called \textit{\gls{Gitpod}} allows running \gls{VSCode} in a web browser, and connect it to a workspace based on a \gls{GitHub} repository.
The workspace has the project files, software development kits and other tools already installed and running in a remote machine in the \gls{cloud}.
This avoids all installation on a student's machine.

\paragraph{For \gls{TDT4250} to follow suit and move to \gls{Gitpod}, the \gls{Ecore} editors would have to be available in \gls{VSCode} as well.}
The current situation is that there are no \gls{Ecore} editors for \gls{VSCode}.
There are also no known \acrshort{MDD} frameworks for \gls{VSCode} that integrates with the other curriculum of \gls{TDT4250} either, as alternatives to \acrshort{EMF}.


\section{The Eclipse Ecosystem Wants to Run Software in the Cloud}\label{sec:intro-eclipse-cloud}
%* Eclipse ecosystem is moving to the cloud, EMF.Cloud, GLSP, Theia, Gitpod, Sprotty.
%  * Pre-project identified that the main actors are TypeFox, EclipseSource, RedHat, Obeo
%  * Main focus on development, not the developer; code in Eclipse and run in cloud

\paragraph{The \acrlong{EMF} is powered by \gls{open source} software and an ecosystem of developers.}
The framework has many tools and software libraries available, contributed by various developers and organizations.
These developers and organizations, is what this thesis nicknames the \textit{Eclipse Ecosystem}.
Some prominent actors are the organizations \textit{TypeFox}, \textit{EclipseSource} (with Dr.\ Jonas Helming and Maximilian Koegel), \textit{Obeo} and \textit{RedHat}~\cite{rekstadModelingEnvironmentCloud2020}.
For example, \textit{\gls{Gitpod}} is developed by TypeFox, and one of the \gls{Eclipse} tree editors for \gls{Ecore} is created by EclipseSource~\cite{typefoxTypeFoxSmartTools,eclipsesourceEMFFormsEditors2016}.

\paragraph{\Gls{cloud} is becoming more popular, and the Eclipse Ecosystem is heading there.}
When something \textit{runs in the \gls{cloud}}, it really means that it runs on rented computers in a data center somewhere outside of the organization.
Running in the cloud is a win for developers and organizations, because they don't need to take care of their own hardware.
And scaling up to more computers is as easy as clicking a button, or often happens automatically with load balancing technology.
No more purchasing of hardware and configuring it.
When developers ``embrace'' the \gls{cloud}, it also means working more with web technologies and less with desktop applications.

\paragraph{To use \acrshort{EMF} in the cloud, the Eclipse ecosystem has started to create new tools.}
Most of the tools are related to \textbf{running} \acrshort{EMF}-based software, but not \textbf{developing} it.
There are \textit{some} advances to developing in the cloud, with \textit{Gitpod} and the \gls{VSCode} re-implementation \textit{\gls{Theia}}, but neither have tools for \acrshort{EMF}.


\section{A Pre-project Identified a Need for a Tree Editor}
% EclipseCon, GLSP, Ecore GLSP, Theia extension, Gitpod, 

\paragraph{This masters thesis is preceded by a pre-project thesis.}
This work happened during the Autumn of 2020, the semester before this masters thesis.
The results were presented in \cite{rekstadModelingEnvironmentCloud2020}.
The project began by identifying what to build.
The need for \acrshort{EMF} editing in the \gls{cloud} was known, but not how to do it or if it was even possible.

\paragraph{The pre-project identified a need for a web-based tree editor for working with \acrshort{EMF}.}
Early plans were to create a diagram editor, inspired by \textit{\gls{UML} Class Diagrams} and the \gls{Eclipse} diagram editor for \gls{Ecore} named \textit{Ecore Tools} (based on \textit{Sirius} by aforementioned Obeo)~\cite{rekstadModelingEnvironmentCloud2020}.
During an online conference for the Eclipse ecosystem, EclipseCon 2020, it became clear that EclipseSource was already working on this~\cite{jonashelmingEcoreToolsCloud2020}.
However, based on the author's experience as a former student of \gls{TDT4250}, most of the work with \gls{Ecore} happened in a tree structure\footnote{\textit{Tree structure} here means the hierarchical parent-child structure, perhaps better known from file system folders and file browsers.} editor with a property sheet.
This kind of editor has what is known as a \textit{master-detail layout}, where the tree is a master view, and the property sheet is the details of the current selection in the tree.
No actor in the Eclipse ecosystem was working on such a tree editor for \gls{Ecore} models for \gls{VSCode}.
Preliminary searches online did not find such an editor created by anyone outside the Eclipse ecosystem either.


\paragraph{Initial requirements for a tree editor were chosen.}
The period of work was constrained to the pre-project and master's thesis, which is from August 2020 to June 2021.
This constraint made it a goal to reduce the amount of unnecessary work and reduce re-implementation of existing solutions.
For example, the \acrlong{EMF} is big, with many years worth of experience ingrained in its implementation details.
Therefore, a non-functional requirement emerged: \textbf{the editor should re-use as much of the existing \acrshort{EMF} java code as possible.}\\

Another non-functional requirement was that \textbf{it should run inside \gls{VSCode} as an extension}.
Gitpod was at the time was using \gls{Theia} as the editor, which was compatible with \gls{VSCode} extensions~\cite{rekstadModelingEnvironmentCloud2020}.
\Gls{Theia} has two extension mechanisms, but only the \gls{VSCode} extension mechanism could be installed during runtime by students~\cite{rekstadModelingEnvironmentCloud2020}.
Because a goal was to use the Gitpod service for \gls{TDT4250}, this compatibility was needed.\\

The third non-functional requirement was that \textbf{the project should be \gls{open source} and designed to live longer than the period of work.}
A goal is to include all or most of the functionality already present in \gls{Eclipse}, which was estimated to be more work than what was possible to do during the pre-project and master's thesis.
Therefore, the development will need to be taken over by someone else afterwards.
Either the Eclipse ecosystem, or a master's thesis by another student.
An \gls{open source} project needs some additional care if it wants to succeed.
For the Eclipse ecosystem to handle it, the software should have a compatible license, and not copy or use code with incompatible licenses.
The code should also be well structured, documented and easy to contribute to for others.\\

The initial, unrefined functional requirement was that \textbf{\gls{VSCode} should be able to view, edit and save \gls{Ecore} models and model instances in ``.ecore'' and ``.xmi'' files.}
The pre-project did further work to refine this functional requirement into multiple smaller requirements, and discovered many new ones, by requirements extraction~\cite[p.~47,48]{rekstadModelingEnvironmentCloud2020}.
As noted in the discussion in \cite[p.~51]{rekstadModelingEnvironmentCloud2020}, the list of functional requirements was not complete.


\paragraph{Related software architectures and protocols were analyzed.}
Because the \acrshort{EMF} tooling had to move to \gls{VSCode} now, it is plausible that it will need to move to another \acrshort{IDE} later in the future.
The pre-project explored protocols related to this, like \acrfull{LSP} and \acrfull{GLSP}.


\paragraph{The pre-project used prototypes to verify the feasibility of the architecture.}
The main issues solved in the pre-project were related to hypothetical design choices and feasibility.
It tried to answer if and how java could be executed from the \gls{VSCode} extension, to reuse \acrshort{EMF} code.
The pre-project also looked for a good data model to support editing of any tree structure, while providing a user interface with high usability and constraints~\cite[p.~24,25]{rekstadModelingEnvironmentCloud2020}.

\paragraph{More work was needed in order to evaluate the pre-project solution.}
No complete editor was produced during the pre-project.
It only proved the possibility of creating a custom frontend, and that extensions could run java programs.
The entire protocol was unexplored, and no real \acrshort{EMF} data was ever loaded into the frontend.
This master's thesis will pick up on these results and try develop them further into a usable solution.
It also aims to create an \gls{open source} repository that is viable and suitable for further development by the Eclipse ecosystem and other master students.

\section{Research Objectives}\label{sec:research-objectives}

\subsection{Problem}

\paragraph{Problem definition}
How can students use the \acrfull{EMF} in a \gls{cloud} based \acrfull{IDE} in order to learn \acrfull{MDD} as part of the course \gls{TDT4250}, \textit{without} using the \gls{Eclipse}?

\paragraph{Value}
\begin{enumerate}
  \item Students may be more motivated to learn \acrshort{MDD} if they do not need to use \gls{Eclipse}, and do not perceive the \acrshort{MDD} framework (\acrshort{EMF}) as \gls{Eclipse}-specific or only for deploying to the \gls{Eclipse}~\cite[p.~2]{rekstadModelingEnvironmentCloud2020}.
  Few to no other courses at \acrshort{NTNU} target \gls{Eclipse} as the deployment/target platform, and \textcite{kuzniarzTeachingModelDrivenSoftware2016} found that students resist learning when the technology and skills are not used in other courses.
  Students also dislike or have problems with \gls{Eclipse} itself, and feedback collected from teaching students in 2015 by \textcite{jordicabotFailedConvinceMy2015} found that much of the complaints were about installation issues and problems with the tools, not problems with \acrshort{MDD} as a concept.
  
  \item By moving \acrshort{EMF} from \gls{Eclipse} to other \gls{IDE}, the value of the framework itself may increase, as adoption of \acrshort{EMF} does not imply adoption or use of \gls{Eclipse}.
  Industry may use the framework for modeling, without requiring the developers to use \gls{Eclipse}.
  A problem for \acrshort{MDD} adoption in general is low impact on personal career needs, identified by \textcite{jonwhittleTaxonomyToolrelatedIssues2015}.
\end{enumerate}

\subsection{Scope}

There are many different activities in \acrshort{MDD}, and the course \gls{TDT4250} investigates related areas such as creating \acrfull{DSL} and custom code generation templates.
Tackling all the aspects of \acrshort{MDD} and \gls{TDT4250} in this thesis is unrealistic, because of the size of work.

The scope is therefore limited to enabling the \textbf{creation and editing of  \acrshort{EMF} model files}.
This thesis is also limited in scope in terms of how far a design for a solution is developed and instantiated as code.
The aim is to prove feasibility of such a design and instantiation, but not to create a fully functional editor with all the features needed to do modeling.
Instead, \textbf{a software foundation will be established}, where the design and principles can guide \textit{other developers'} further development towards a complete solution.

\subsection{Objectives}

There are three objectives for this thesis.

\paragraph{Objective 1: EMF Modeling in the Cloud}
The first objective is to design a solution to enable \acrfull{MDD} with the \acrfull{EMF} in a cloud based \acrshort{IDE}.
\Gls{Gitpod} with \gls{VSCode} is chosen as the \acrshort{IDE}.
A solution should be able to support all the modeling tasks needed to teach \acrshort{MDD}, and \gls{Eclipse} should not need to be installed on a student's computer.

\paragraph{Objective 2: Open Source project}
The artifact should exist longer than the period of work for the master's thesis, and be developed further by contributors other than this thesis' author.
The artifact should be in a \gls{open source} project, to fit in with the expectations of the Eclipse ecosystem, current trends and expectations of students.

\paragraph{Objective 3: An architecture to enable future related IDE migrations}
This may not be the last time \acrshort{EMF} will be used in a new \acrshort{IDE}.
And other tools and frameworks may need the same type of migration, as \gls{cloud} adoption increases.
Therefore, the solution should apply a software architecture that allows easier migration to another \acrshort{IDE}, by providing more reuseable and ``higher abstraction level'' components than what \acrshort{EMF} currently has.
The software architecture should also provide guidance or be directly applicable to other tools that work in a similar fashion.
A bonus objective is if this design can provide instantiated components (artifacts) that are reuseable outside of \acrshort{EMF}.

\section{Thesis Structure}

The thesis starts by introducing the core problems and context in \cref{chap:introduction}.\\

Next, a substantial amount of background material is presented in \cref{chap:background}.
This introduces \acrlong{MDD} and how it's practically done in an education context.
Existing tools for working with \acrshort{EMF} are presented, as they are prior art and crucial for a solution's design.
Some terminology and theory is presented for trees and tree editors.
Then \acrshort{EMF} is described in more detail.
After that, the \gls{VSCode} and \gls{Theia} \acrshortpl{IDE} are introduced, as they are central to the solution.
Some existing protocols are presented, because they solve analogous problems to what this thesis identifies.
A section will then follow, describing how the Eclipse ecosystem is itself targeting the \gls{cloud}, and some relevant tools they provide.
Lastly, the findings of the pre-project are presented.
The pre-project laid a lot of the initial foundations for this master's thesis.\\

The next chapter details the method used to develop a solution.
It explains the overarching methodology of Design Science Research, and the finer grained methods used for requirements engineering, development and artifact evaluation.\\

The following results section presents a developed software artifact, a software architecture and a related protocol.
It also explains the efforts done to increase the likelyhood of success as a \gls{open source} project.\\

After the results, a chapter of evaluation follows.
This sees how valuable, fit and complete the designs are, as well as how well the project follows \gls{open source} project guidelines.\\

A discussion chapter argues for the implications of the results and evaluation,
and the final chapter concludes this thesis.